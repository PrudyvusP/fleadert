{% extends "base.html" %}

{% block content %}

<style>
	/* Стили таблицы (IKSWEB) */
	table.iksweb{text-decoration: none;border-collapse:collapse;width:100%;text-align:center;}
	table.iksweb th{font-weight:normal;font-size:14px; color:#b3274a;background-color:#ffffff;}
	table.iksweb td{font-size:12px;color:#111314;}
	table.iksweb td,table.iksweb th{white-space:pre-wrap;padding:24px 18px;line-height:12px;vertical-align: middle;border: 1px solid #fff2f6;}	table.iksweb tr:hover{background-color:#eddadf}
	table.iksweb tr:hover td{color:#000000;cursor:pointer;}
</style>

<table class="iksweb">
	<tbody>
		<tr>
			<th>ID</th>
			<th>Пользователь</th>
			<th>Роль</th>
			<th>Задач выполнено</th>
			<th>Ранг</th>
			<th>E-mail</th>
			<th>Телефон</th>
            <th>Был в сети последний раз</th>
		</tr>
        {% for user in users %}
		<tr>
			<td>{{ user.id }}</td>
			<td> <img src="{{ url_for('static', filename=user.avatar) }}" width="16" height="16"
					  class="rounded-circle"> <a href="{{ url_for('main.render_user_page', username=user.username) }}"> {{ user.username }} </a> </td>
			<td>{% if user.is_boss==True %} <b> руководство </b> {% else %} пользователь {% endif %}</td>
			<td>{{ user.executed_tasks|length }}</td>
			<td>{% if user.is_boss==True %} - {% else %} {% if user.executed_tasks|length <= 50 %} молодой ★
				{% elif user.executed_tasks|length > 50 and user.executed_tasks|length <= 100 %} новичок ★★
				{% elif user.executed_tasks|length > 100 and user.executed_tasks|length <= 250 %} специалист ★★★
				{% else %} эксперт &#127775; {% endif %} {% endif %}</td>
			<td>{{ user.email }}</td>
			<td>{% if user.phone %} {{ user.phone }} {% else %} не указан {% endif %}</td>
            <td>{{ moment(user.last_seen).fromNow(refresh=True) }}</td>
		</tr>
    {% endfor %}
	</tbody>
</table>
{% endblock %}